<form (ngSubmit)="save()" [formGroup]="saveForm"  ngNativeValidate>
    <mat-label>Category</mat-label>
    <mat-select formControlName="category" [(value)]="selected">
        <mat-optgroup *ngFor="let category of (categories$ | async)" [label]="category.name">
            <mat-option *ngFor="let subcategory of category.subCategories" value="{{subcategory.id}}">
                {{subcategory.name}}
            </mat-option>
        </mat-optgroup>
    </mat-select>
    <mat-label>Assign to</mat-label>
    <mat-form-field class="chip-list">
        <mat-chip-list #chipList>
            <mat-chip
            *ngFor="let agent of agents"
            [selectable]="selectable"
            [removable]="removable"
            (removed)="remove(agent)">
            {{agent}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input
            #agentInput
            formControlName = "agentCtrl"
            [matAutocomplete]="auto"
            [matChipInputFor]="chipList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            [matChipInputAddOnBlur]="addOnBlur"
            (matChipInputTokenEnd)="add($event)">
        </mat-chip-list>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
            <mat-option *ngFor="let agent of filteredAgents | async" [value]="agent">
            {{agent}}
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>
    <div class="input-container name-input-container">
        <label for="flyerName" trans>Flyer name</label>
        <input type="text" id="flyerName" formControlName="flyerName" value="{{flyerName}}">
    </div>
    <mat-label>Save as</mat-label>
    <mat-radio-group formControlName="saveType" required>
        <mat-radio-button [checked]="saveType==='completed'" value="6">Completed</mat-radio-button>
        <mat-radio-button [checked]="saveType==='draft'" value="1">Draft</mat-radio-button>
    </mat-radio-group>
    <button mat-stroked-button mat-dialog-close color="primary" class="save-button" trans>Close</button>
    <button mat-flat-button color="primary" class="save-button" trans>Save</button>
</form>
